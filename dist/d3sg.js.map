{"version":3,"sources":["../d3sg.js"],"names":["projectName","localStorage","setItem","rem2px","rem","parseFloat","getComputedStyle","document","documentElement","fontSize","container","getElementById","margin","top","right","bottom","left","padding","width","offsetWidth","height","offsetHeight","x","d3","scaleLinear","range","y","scaleTime","color","scaleOrdinal","schemeCategory10","timeFormat","xAxis","axisBottom","tickFormat","format","yAxis","axisLeft","chart","select","svgChart","append","attr","tooltip","style","parsedTime","d3Process","data","forEach","d","Place","Time","split","Date","UTC","domain","min","Year","max","extent","call","text","selectAll","enter","toISOString","Doping","on","html","Name","Nationality","mouseX","event","pageX","node","getBoundingClientRect","mouseY","pageY","legend","i","json","then"],"mappings":"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","sourceRoot":".","sourcesContent":["const projectName = 'scatter-plot';\nlocalStorage.setItem('example_project', 'D3: Scatter Plot');\n\nconst rem2px = (rem) => (rem * parseFloat(getComputedStyle(document.documentElement).fontSize));\n\n/*\n  padding-top: 4.5rem\n */\n\nlet container = document.getElementById('container'),\n    margin = {\n      top: rem2px(1),\n      right: rem2px(1.5),\n      bottom: rem2px(2),\n      left: rem2px(4)\n    },\n    padding = {\n      top: rem2px(4.5),\n      right: rem2px(1),\n      bottom: rem2px(2),\n      left: rem2px(1),\n    },\n    width = container.offsetWidth\n        - margin.left - margin.right\n        - padding.left - padding.right,\n    height = container.offsetHeight\n        - margin.top - margin.bottom\n        - padding.top - padding.bottom;\n\nconst x = d3.scaleLinear()\n            .range([0, width]),\n      y = d3.scaleTime()\n            .range([0, height]),\n      color = d3.scaleOrdinal(d3.schemeCategory10),\n      timeFormat = d3.timeFormat(\"%M:%S\"),\n      xAxis = d3.axisBottom(x).tickFormat(d3.format(\"d\")),\n      yAxis = d3.axisLeft(y).tickFormat(timeFormat);\n\nlet chart = d3.select('.chart');\n\nlet svgChart = chart.append(\"svg\")\n    .attr(\"width\", width  + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\nlet tooltip = chart.append('div')\n    .attr('id', 'tooltip')\n    .style('opacity', 0);\n\nlet parsedTime = '';\n\nconst d3Process = (data) => {\n  data.forEach((d) => {\n    d.Place += d.Place;\n    parsedTime = d.Time.split(':');\n    d.Time = new Date(Date.UTC(1970, 0, 1, 0, parsedTime[0], parsedTime[1]));\n  });\n\n  x.domain([d3.min(data, (d) => d.Year - 1),\n    d3.max(data, (d) =>  d.Year + 1)]);\n  y.domain(d3.extent(data, (d) => d.Time));\n\n  svgChart.append(\"g\")\n      .attr(\"id\",\"x-axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis);\n\n  svgChart.append(\"g\")\n      .attr(\"id\",\"y-axis\")\n      .call(yAxis);\n\n\n  svgChart.append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('x', -42)\n      .attr('y', 23)\n      .style('font-size', rem2px(1.2))\n      .text('Time');\n\n  svgChart.selectAll(\".dot\")\n      .data(data)\n      .enter().append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"r\", 7)\n      .attr(\"cx\", (d) => x(d.Year))\n      .attr(\"cy\", (d) => y(d.Time))\n      .attr(\"data-xvalue\", (d) => d.Year)\n      .attr(\"data-yvalue\", (d) => d.Time.toISOString())\n      .style(\"fill\", (d) => color(d.Doping !== \"\"))\n      .on(\"mouseover\", (d) => {\n        tooltip.style(\"opacity\", .9);\n        tooltip.attr(\"data-year\", d.Year);\n        tooltip.html(d.Name + \": \" + d.Nationality + \"<br/>\"\n            + \"Year: \" +  d.Year + \", Time: \" + timeFormat(d.Time)\n            + (d.Doping ? \"<br/><br/>\" + d.Doping : \"\"));\n\n        // Calculate x and y positions for tooltip.\n        let mouseX = d3.event.pageX - svgChart.node().getBoundingClientRect().x + 10,\n            mouseY = d3.event.pageY - svgChart.node().getBoundingClientRect().y + 10,\n            y = mouseY + tooltip.node().offsetHeight + rem2px(1) > height ?\n                mouseY - tooltip.node().offsetHeight / 2 + rem2px(1)\n                : mouseY + tooltip.node().offsetHeight + rem2px(1),\n            x = mouseX - tooltip.node().offsetWidth / 2 > width ?\n                mouseX - tooltip.node().offsetWidth + rem2px(1)\n                : mouseX - tooltip.node().offsetWidth / 2 + rem2px(1);\n        if (x < 0) {\n          x = mouseX;\n        }\n        tooltip.style(\"left\", (x) + \"px\")\n               .style(\"top\", (y) + \"px\");\n      })\n      .on(\"mouseout\", (d) => {\n        tooltip.style(\"opacity\", 0);\n      });\n\n  const legend = svgChart.selectAll(\".legend\")\n      .data(color.domain())\n      .enter().append(\"g\")\n      .attr(\"class\", \"legend\")\n      .attr(\"id\", \"legend\")\n      .attr(\"transform\", (d, i) => \"translate(0,\" + i * rem2px(1.5) + \")\");\n\n  legend.append(\"rect\")\n      .attr(\"x\", width - rem2px(1))\n      .attr(\"width\", rem2px(1))\n      .attr(\"height\", rem2px(1))\n      .style(\"fill\", color);\n\n  legend.append(\"text\")\n      .attr(\"x\", width - rem2px(1.5))\n      .attr(\"y\", rem2px(0.5))\n      .attr(\"dy\", \".35em\")\n      .style(\"text-anchor\", \"end\")\n      .text((d) => d ? \"Riders with doping allegations\"\n                     : \"No doping allegations\");\n};\n\n// Create Chart.\nd3.json('https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json')\n    .then((data) => d3Process(data));"],"file":"d3sg.js"}