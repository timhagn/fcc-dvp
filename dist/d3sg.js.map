{"version":3,"sources":["../src/d3sg.js"],"names":["projectName","localStorage","setItem","rem2px","rem","parseFloat","getComputedStyle","document","documentElement","fontSize","container","getElementById","margin","top","right","bottom","left","padding","width","offsetWidth","height","offsetHeight","x","d3","scaleLinear","range","y","scaleTime","color","scaleOrdinal","schemeCategory10","timeFormat","xAxis","axisBottom","tickFormat","format","yAxis","axisLeft","chart","select","svgChart","append","attr","tooltip","style","parsedTime","d3Process","data","forEach","d","Place","Time","split","Date","UTC","domain","min","Year","max","extent","call","text","selectAll","enter","toISOString","Doping","on","html","Name","Nationality","mouseX","event","pageX","node","getBoundingClientRect","mouseY","pageY","legend","i","json","then"],"mappings":"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","sourceRoot":".","sourcesContent":["const projectName = 'scatter-plot';\nlocalStorage.setItem('example_project', 'D3: Scatter Plot');\n\nconst rem2px = (rem) => (rem * parseFloat(getComputedStyle(document.documentElement).fontSize));\n\n/*\n  padding-top: 4.5rem\n */\n\nlet container = document.getElementById('container'),\n    margin = {\n      top: rem2px(1),\n      right: rem2px(1.5),\n      bottom: rem2px(2),\n      left: rem2px(4)\n    },\n    padding = {\n      top: rem2px(4.5),\n      right: rem2px(1),\n      bottom: rem2px(2),\n      left: rem2px(1),\n    },\n    width = container.offsetWidth\n        - margin.left - margin.right\n        - padding.left - padding.right,\n    height = container.offsetHeight\n        - margin.top - margin.bottom\n        - padding.top - padding.bottom;\n\nconst x = d3.scaleLinear()\n            .range([0, width]),\n      y = d3.scaleTime()\n            .range([0, height]),\n      color = d3.scaleOrdinal(d3.schemeCategory10),\n      timeFormat = d3.timeFormat(\"%M:%S\"),\n      xAxis = d3.axisBottom(x).tickFormat(d3.format(\"d\")),\n      yAxis = d3.axisLeft(y).tickFormat(timeFormat);\n\nlet chart = d3.select('.chart');\n\nlet svgChart = chart.append(\"svg\")\n    .attr(\"width\", width  + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\nlet tooltip = chart.append('div')\n    .attr('id', 'tooltip')\n    .style('opacity', 0);\n\nlet parsedTime = '';\n\nconst d3Process = (data) => {\n  data.forEach((d) => {\n    d.Place += d.Place;\n    parsedTime = d.Time.split(':');\n    d.Time = new Date(Date.UTC(1970, 0, 1, 0, parsedTime[0], parsedTime[1]));\n  });\n\n  x.domain([d3.min(data, (d) => d.Year - 1),\n    d3.max(data, (d) =>  d.Year + 1)]);\n  y.domain(d3.extent(data, (d) => d.Time));\n\n  svgChart.append(\"g\")\n      .attr(\"id\",\"x-axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(xAxis);\n\n  svgChart.append(\"g\")\n      .attr(\"id\",\"y-axis\")\n      .call(yAxis);\n\n\n  svgChart.append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('x', -42)\n      .attr('y', 23)\n      .style('font-size', rem2px(1.2))\n      .text('Time');\n\n  svgChart.selectAll(\".dot\")\n      .data(data)\n      .enter().append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"r\", 7)\n      .attr(\"cx\", (d) => x(d.Year))\n      .attr(\"cy\", (d) => y(d.Time))\n      .attr(\"data-xvalue\", (d) => d.Year)\n      .attr(\"data-yvalue\", (d) => d.Time.toISOString())\n      .style(\"fill\", (d) => color(d.Doping !== \"\"))\n      .on(\"mouseover\", (d) => {\n        tooltip.style(\"opacity\", .9);\n        tooltip.attr(\"data-year\", d.Year);\n        tooltip.html(d.Name + \": \" + d.Nationality + \"<br/>\"\n            + \"Year: \" +  d.Year + \", Time: \" + timeFormat(d.Time)\n            + (d.Doping ? \"<br/><br/>\" + d.Doping : \"\"));\n\n        // Calculate x and y positions for tooltip.\n        let mouseX = d3.event.pageX - svgChart.node().getBoundingClientRect().x + 10,\n            mouseY = d3.event.pageY - svgChart.node().getBoundingClientRect().y + 10,\n            y = mouseY + tooltip.node().offsetHeight + rem2px(1) > height ?\n                mouseY - tooltip.node().offsetHeight / 2 + rem2px(1)\n                : mouseY + tooltip.node().offsetHeight + rem2px(1),\n            x = mouseX - tooltip.node().offsetWidth / 2 > width ?\n                mouseX - tooltip.node().offsetWidth + rem2px(1)\n                : mouseX - tooltip.node().offsetWidth / 2 + rem2px(1);\n        if (x < 0) {\n          x = mouseX;\n        }\n        tooltip.style(\"left\", (x) + \"px\")\n               .style(\"top\", (y) + \"px\");\n      })\n      .on(\"mouseout\", (d) => {\n        tooltip.style(\"opacity\", 0);\n      });\n\n  const legend = svgChart.selectAll(\".legend\")\n      .data(color.domain())\n      .enter().append(\"g\")\n      .attr(\"class\", \"legend\")\n      .attr(\"id\", \"legend\")\n      .attr(\"transform\", (d, i) => \"translate(0,\" + i * rem2px(1.5) + \")\");\n\n  legend.append(\"rect\")\n      .attr(\"x\", width - rem2px(1))\n      .attr(\"width\", rem2px(1))\n      .attr(\"height\", rem2px(1))\n      .style(\"fill\", color);\n\n  legend.append(\"text\")\n      .attr(\"x\", width - rem2px(1.5))\n      .attr(\"y\", rem2px(0.5))\n      .attr(\"dy\", \".35em\")\n      .style(\"text-anchor\", \"end\")\n      .text((d) => d ? \"Riders with doping allegations\"\n                     : \"No doping allegations\");\n};\n\n// Create Chart.\nd3.json('https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json')\n    .then((data) => d3Process(data));"],"file":"d3sg.js"}