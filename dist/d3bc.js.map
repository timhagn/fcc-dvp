{"version":3,"sources":["../d3bc.js"],"names":["projectName","localStorage","setItem","rem2px","rem","parseFloat","getComputedStyle","document","documentElement","fontSize","marginY","container","getElementById","width","offsetWidth","height","offsetHeight","chart","d3","select","svgChart","append","attr","tooltip","style","hoverbar","d3Process","response","data","barWidth","length","yearQuarters","map","item","quarter","temp","substring","years","xScale","scaleLinear","domain","range","xAxis","axisBottom","scale","tickFormat","format","call","GDP","gdpMin","min","gdpMax","max","scaledGDP","yAxisScale","yAxis","axisLeft","text","selectAll","enter","d","i","on","transition","duration","html","toFixed","replace","Math","console","log","json","then"],"mappings":"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","sourceRoot":".","sourcesContent":["const projectName = 'bar-chart';\nlocalStorage.setItem('example_project', 'D3: Bar Chart');\n\nconst rem2px = (rem) => (rem * parseFloat(getComputedStyle(document.documentElement).fontSize));\n\nlet marginY = rem2px(1),\n    container = document.getElementById('container'),\n    width = container.offsetWidth - rem2px(2),\n    height = container.offsetHeight - rem2px(8);\n\nlet chart = d3.select('.chart');\n\nlet svgChart = chart.append('svg')\n    .attr('width', width)\n    .attr('height', height + marginY);\n\nlet tooltip = chart.append('div')\n    .attr('id', 'tooltip')\n    .style('opacity', 0);\n\nlet hoverbar = chart.append('div')\n    .attr('class', 'hoverbar')\n    .style('opacity', 0);\n\nconst d3Process = (response) => {\n  const data = response.data,\n      barWidth = (width - rem2px(5)) / data.length;\n\n  // Obtain the years from the date strings and return quartered.\n  const yearQuarters = data.map((item) => {\n    let quarter = '';\n    let temp = item[0].substring(5, 7);\n\n    switch (temp) {\n      case '01':\n        quarter = 'Q1';\n        break;\n      case '04':\n        quarter = 'Q2';\n        break;\n      case '07':\n        quarter = 'Q3';\n        break;\n      case '10':\n        quarter = 'Q4';\n        break;\n    }\n    return item[0].substring(0, 4) + ' ' + quarter\n  });\n\n  // Obtain years from quarters.\n  const years = yearQuarters.map((item) => item.substring(0, 4));\n\n\n  // Create x-Axis.\n  let xScale = d3.scaleLinear()\n      .domain([years[0], years[years.length - 1]])\n      .range([0, width - rem2px(5)]);\n\n  let xAxis = d3.axisBottom()\n      .scale(xScale)\n      .tickFormat(d3.format(\"d\"));\n\n  svgChart.append('g')\n      .call(xAxis)\n      .attr('id', 'x-axis')\n      .attr('transform', 'translate(60, ' + height + ')');\n\n\n  // Create y-Axis.\n  const GDP = data.map((item) => item[1]);\n\n  let gdpMin = d3.min(GDP);\n  let gdpMax = d3.max(GDP);\n\n  let scaleLinear = d3.scaleLinear()\n      .domain([gdpMin, gdpMax])\n      .range([(gdpMin / gdpMax) * height, height]);\n\n  let scaledGDP = GDP.map((item) => scaleLinear(item));\n\n  let yAxisScale = d3.scaleLinear()\n      .domain([gdpMin, gdpMax])\n      .range([height, (gdpMin / gdpMax) * height]);\n\n  let yAxis = d3.axisLeft(yAxisScale);\n\n  svgChart.append('text')\n      .attr('transform', 'rotate(-90)')\n      .attr('x', -40)\n      .attr('y', 80)\n      .text('GDP');\n\n  svgChart.append('g')\n      .call(yAxis)\n      .attr('id', 'y-axis')\n      .attr('transform', 'translate(60, 0)');\n\n\n  // Create Bars, hover overlays and tooltips.\n  svgChart.selectAll('rect')\n      .data(scaledGDP)\n      .enter()\n      .append('rect')\n      .attr('data-date', (d, i) => data[i][0])\n      .attr('data-gdp',(d, i) => data[i][1])\n      .attr('class', 'bar')\n      .attr('x', (d, i) => i * barWidth)\n      .attr('y', (d, i) => height - d)\n      .attr('width', barWidth)\n      .attr('height', (d) => d)\n      .style('fill', '#232066')\n      .attr('transform', 'translate(60, 0)')\n      .on('mouseover', (d, i) => {\n        hoverbar.transition()\n            .duration(0)\n            .style('height', d + 'px')\n            .style('width', barWidth + 'px')\n            .style('opacity', 1)\n            .style('left', (i * barWidth) + 'px')\n            .style('top', height - d + 'px')\n            .style('transform', 'translateX(5rem)');\n\n        tooltip.transition()\n            .duration(100)\n            .style('opacity', 1);\n        tooltip.html(yearQuarters[i] + '<br>' + '$' + GDP[i].toFixed(1).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,') + ' Billion')\n            .attr('data-date', data[i][0])\n            .style('left', Math.min(width - rem2px(15), (i * barWidth) + 30) + 'px')\n            .style('top', height - rem2px(3) + 'px')\n            .style('transform', 'translateX(5rem)');\n        console.log(Math.min(width - rem2px(10), (i * barWidth) + 30))\n      })\n      .on('mouseout', (d) => {\n        tooltip.transition()\n            .duration(300)\n            .style('opacity', 0);\n        hoverbar.transition()\n            .duration(300)\n            .style('opacity', 0);\n      });\n};\n\n// Create Chart.\nd3.json('https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json')\n    .then((response) => d3Process(response));"],"file":"d3bc.js"}